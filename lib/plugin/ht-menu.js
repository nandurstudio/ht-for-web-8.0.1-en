!function(I,r){"use strict";function g(){return document}function u(I){return g().createElement(I)}function l(I,r,d){I.style.setProperty(r,d,p)}function o(I,r){I.appendChild(r)}var d,Z=I.ht,A="innerHTML",R="className",p=null,c="px",G=Z.Default,P=G.getInternal(),T="0",Y=P.addEventListener,t=P.removeEventListener,f=G.isTouchable,z=G.isTouchEvent;P.addMethod(G,{menuLabelFont:(f?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),Z.widget.Menu=function(I){var r=this,d=r._view=P.createView(null,r),j=r.$1g=new Z.widget.ContextMenu,Y=u("ul");j._r=!0,j._view[R]+=" ht-widget-dropdownmenu",d[R]="ht-widget-menu",Y[R]="header",l(d,"margin",T),l(d,"padding",T),l(d,"background",G.menuBackground),l(d,"-webkit-user-select","none"),l(d,"-moz-user-select","none"),l(d,"user-select","none"),l(d,"text-align","left"),l(d,"border-bottom",G.menuSeparatorWidth+"px solid "+G.menuSeparatorColor),l(d,"cursor","default"),l(d,"overflow","auto"),l(d,"white-space","nowrap"),l(d,"font",G.menuLabelFont),l(d,"color",G.menuLabelColor),l(d,"box-sizing","border-box"),l(d,"-moz-box-sizing","border-box"),l(Y,"list-style","none"),l(Y,"margin",T),l(Y,"padding",T),l(Y,"display","inline-block"),o(d,Y),r.setItems(I),r.$2g=function(I){r.$3g(I)},r.$4g=function(I){r.$5g(I)},r.$6g=function(I){r.$7g(I)},r.$8g=function(I){r.$9g(I)},r.$9b=function(I){r.$10g(I)},r._autoShow=!0,r.setAutoShow(!1),j.afterHide=function(){r.$11g()},j.afterShow=function(){r.$12g()},t(g(),"keydown",j.$3b),r.$3b=function(I){r.$13g(I)},r.invalidate()},I="Menu",d={_items:p,$14g:G.menuHoverBackground,$15g:G.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(I){var r=this;if(r.$21g=I,r.setItems(r._items),"largeicons"===I){for(var d=r._view.querySelectorAll(".header-item"),j=0,Y=0;Y<d.length;Y++)var Z=d[Y],j=Math.max(j,Z.clientWidth);for(Y=0;Y<d.length;Y++){Z=d[Y];l(Z,"min-width",j+c)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(I){this.$22g=I;for(var r=this._view.querySelectorAll(".header-item"),d=0;d<r.length;d++){var j=r[d];l(j,"margin-left",I+c),l(j,"margin-right",I+c)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(I){this.$23g=I;for(var r=this._view.querySelectorAll(".header-item"),d=0;d<r.length;d++){var j=r[d];l(j,"margin-top",I+c),l(j,"margin-bottom",I+c)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(I){this.$24g=I,l(this._view,"text-align",I)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){!1===this._enableGlobalKey&&(Y(g(),"keydown",this.$3b),this._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,t(g(),"keydown",this.$3b)},setHoverBackground:function(I){this.$14g=I},setHoverColor:function(I){this.$15g=I},setItems:function(I){var r=this,d=r._view,j=r.$21g;if(r._items=I,d.children[0][A]="",r.$16g={},I&&I.length){for(var d=d.children[0],Y=0,Z=g().createDocumentFragment();Y<I.length;Y++){var c,G=I[Y],P=u("li"),p=u("span");G.icon&&((c=u("canvas"))[R]="menu-item-icon","smallicons"===j?(l(c,"height","1.2em"),l(c,"width","1.2em"),l(c,"vertical-align","middle")):(l(c,"height","32px"),l(c,"width","32px"),l(c,"display","block"),l(c,"margin","0 auto")),c.$20g=G.icon,o(P,c)),P[R]="header-item",l(P,"display","inline-block"),l(P,"vertical-align","top"),l(P,"padding","0 1.2em"),l(P,"line-height","1.8em"),"largeicons"===j&&l(P,"text-align","center"),l(P,"background-color","rgba(0,0,0,0)"),P.setAttribute("data-index",Y),r.$16g[Y]=G.items,p[A]=G.label,"iconsonly"!==j&&o(P,p),o(Z,P)}o(d,Z)}},showDropdownMenu:function(I){var r,d=this,j=d.$16g[I],Y=d.$1g,I=d._view.children[0].children[I],Z=d.$17g;I&&I!==Z&&(Z&&d.hideDropdownMenu(),Z=I.getBoundingClientRect(),r=G.getWindowInfo(),d.$17g=I,Y.setItems(j),Y.show(Z.left+r.left,Z.top+Z.height+r.top,!1))},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(I,r){var d=this._items;return d&&0!==d.length?this.$1g.getItemByProperty(I,r,d):p},$12g:function(){var I=this,r=I.$17g;r.style.background=I.$14g,r.style.color=I.$15g,I._autoShow||Y(g(),f?"touchstart":"mousedown",I.$9b)},$11g:function(){var I=this.$17g;I&&(I.style.background="",I.style.color="",this.$17g=p),t(g(),f?"touchstart":"mousedown",this.$9b)},$10g:function(I){var r=this._view,d=this.$1g,j=r.children[0];!g().body.contains(r)||j.contains(I.target)||d._view.contains(I.target)||this.hideDropdownMenu()},$13g:function(I){var r=this.$1g;g().body.contains(this._view)&&r.$13b.$4b.call(r.$13b,I,this._items)},setAutoShow:function(I){var r=this,d=r.$1g,j=r._view;r._autoShow!==I&&(r._autoShow?(t(j,"mouseover",r.$2g),t(j,"mouseout",r.$4g),t(d._view,"mouseout",r.$4g),f||(Y(j,"mouseover",r.$8g),Y(j,"mouseout",r.$8g)),Y(j,f?"touchstart":"mousedown",r.$6g)):(t(j,"mouseover",r.$8g),t(j,"mouseout",r.$8g),t(j,f?"touchstart":"mousedown",r.$6g),t(g(),f?"touchstart":"mousedown",r.$9b),f||(Y(j,"mouseover",r.$2g),Y(j,"mouseout",r.$4g),Y(d._view,"mouseout",r.$4g))),r._autoShow=I)},$3g:function(I){var r=this._view.children[0],d=I.target;if(r!==d&&r.contains(d)){for(;"header-item"!==d[R];)d=d.parentNode;this.showDropdownMenu(d.getAttribute("data-index"))}},$5g:function(I){var r=this._view.children[0],d=this.$1g,j=I.target,I=I.relatedTarget;!r.contains(j)&&!d._view.contains(j)||r.contains(I)||d._view.contains(I)||this.hideDropdownMenu()},$7g:function(I){I.preventDefault();var r=this,d=r._view.children[0],j=r.$1g,Y=I.target;if(G.isLeftButton(I)&&d!==Y&&d.contains(Y))if(z(I)){for(;"header-item"!==Y[R];)Y=Y.parentNode;var d=Y.getAttribute("data-index"),j=r.$1g,I=r._view.children[0].children[d],Z=r.$17g;j.isShowing()&&r.hideDropdownMenu(),I!==Z&&r.showDropdownMenu(d)}else if(j.isShowing())r.hideDropdownMenu();else{for(;"header-item"!==Y[R];)Y=Y.parentNode;r.showDropdownMenu(Y.getAttribute("data-index"))}},$9g:function(I){var r=this,d=r._view,j=r.$1g,Y=I.target;if(d.contains(Y)){for(var Z=d.querySelectorAll(".header-item"),c=p,G=0;G<Z.length;G++){var P=Z[G];P.style.background="",P.style.color="","mouseover"===I.type?P.contains(Y)&&(c=P):"mouseout"===I.type&&j.isShowing()&&r.$17g===P&&(c=P)}j.isShowing()&&(c=c||r.$17g,r.showDropdownMenu(c.getAttribute("data-index"))),c&&(c.style.background=r.$14g,c.style.color=r.$15g)}},getShowingMenuIndex:function(){var I=this.$17g;return I?I.getAttribute("data-index"):-1},addTo:function(I){var r=this._view;o(I,r),this.invalidate()},dispose:function(){var I=this,r=I._view,d=I.$1g;r&&(I._autoShow?(t(r,"mouseover",I.$2g),t(r,"mouseout",I.$4g),t(d._view,"mouseout",I.$4g)):(t(r,"mouseover",I.$8g),t(r,"mouseout",I.$8g),t(r,f?"touchstart":"mousedown",I.$6g),t(g(),f?"touchstart":"mousedown",I.$9b)),t(g(),"keydown",I.$3b),d.dispose(),r.parentNode&&r.parentNode.removeChild(r),I._view=I.$1g=I.$16g=I._items=I.$17g=I.$2g=I.$4g=I.$6g=I.$8g=I.$9b=I.$3b=p)},$19g:function(I,r,d,j){I=P.initContext(I);P.translateAndScale(I,0,0,1),I.clearRect(0,0,d,j),G.drawStretchImage(I,G.getImage(r),"fill",0,0,d,j),I.restore()},validateImpl:function(){for(var I=this._view.querySelectorAll(".menu-item-icon"),r=0;r<I.length;r++){var d=I[r],j=d.clientWidth,Y=d.clientHeight;j&&Y&&(P.setCanvas(d,j,Y),this.$19g(d,G.getImage(d.$20g),j,Y))}}},G.def(Z.widget[I],r,d)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);