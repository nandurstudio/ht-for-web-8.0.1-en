!function(j,q){"use strict";function _(){return document}function x(){return L("div")}function d(){return L("canvas")}function i(){return document.body}function g(j,q,_){j.style.setProperty(q,_,p)}function m(j,q){j.appendChild(q)}function w(j,q){j.removeChild(q)}function P(j){this.$22h=j,this.addListeners()}var F="px",X="innerHTML",b="className",T=ht.Default,V=ht.Color,a=ht.Node,Y="top",I=T.animate,l=T.getInternal(),O="0",k="none",H="max-height",E="font",o="background",A="border-box",S="user-select",r="box-sizing",K="overflow",y=T.isTouchable,Z=T.isTouchEvent,l=T.getInternal(),U=V.titleIconBackground,B=T.scrollBarInteractiveSize,J=/msie 9/.test(j.navigator?j.navigator.userAgent.toLowerCase():""),p=null,L=function(j){return _().createElement(j)},G=l.addEventListener,j=(l.removeEventListener,l.addMethod(T,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:U,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:U}]},paletteTitleLabelColor:T.labelSelectColor,paletteTitleLabelFont:T.labelFont,paletteContentLabelFont:T.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:T.widgetTitleHeight,paletteTitleBackground:V.titleBackground,paletteTitleHoverBackground:V.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:void 0,paletteItemHoverBorderColor:V.highlight,paletteItemSelectBackground:V.highlight},!0),".palette-item:hover{border: 1px solid "+T.paletteItemHoverBorderColor+" !important} .palette-header:hover{background: "+T.paletteTitleHoverBackground+" !important}"),U=document.createElement("style");y||(U.styleSheet?U.styleSheet.cssText=j:U.appendChild(_().createTextNode(j))),_().getElementsByTagName("head")[0].appendChild(U);T.def(P,q,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var j=this;j.$36h&&i().removeChild(j.$36h),j.$23h=j.$24h=j.$25h=j.$35h=j.$36h=p},handle_touchstart:function(j){for(var q,_,V=this,P=V.$22h,i=j.target,S=P.sm(),y=P.dm(),U="palette-header",Z="palette-item",B=!1,x=!1,d=!1;i&&(i[b]||"").indexOf(U)<0&&(i[b]||"").indexOf(Z)<0;)i=i.parentNode;i&&0<=i[b].indexOf("palette-header-tool")?B=!0:i&&0<=i[b].indexOf(U)?d=!0:i&&0<=i[b].indexOf(Z)&&(x=!0),T.isLeftButton(j)?V.$27h(j)?(V.$24h=T.getClientPoint(j),V.$25h=P.ty()):B?(T.preventDefault(j),q=i.parentNode.$11h,(B=(_=y.getDataById(q)).s("tools")[i.toolIndex]).action&&B.action.call(P)):d?(T.preventDefault(j),q=i.$11h,(_=y.getDataById(q)).isExpanded()?_.setExpanded(!1):_.setExpanded(!0)):x?(q=i.$11h,B=y.getDataById(q),S.ss(B),P.handleDragAndDrop&&(T.preventDefault(j),B.s("draggable")&&(P.handleDragAndDrop(j,"prepare"),V.$35h=0)),B.s("draggable")||(T.preventDefault(j),V.$24h=T.getClientPoint(j),V.$25h=P.ty())):(T.preventDefault(j),V.$24h=T.getClientPoint(j),V.$25h=P.ty()):V.$26h(j)},handle_mousedown:function(j){this.handle_touchstart(j)},handle_mousewheel:function(j){this.handleScroll(j,j.wheelDelta/40,j.wheelDelta!==j.wheelDeltaX)},handle_DOMMouseScroll:function(j){this.handleScroll(j,-j.detail,1)},handleScroll:function(j,q,_){var V=this.$22h;T.preventDefault(j),_&&V._41o()&&V.ty(V.ty()+20*q)},handle_mouseup:function(j){this.handle_touchend(j)},handle_touchend:function(j){this.$37h(j),this.$26h(j)},handleWindowMouseUp:function(j){this.handleWindowTouchEnd(j)},handleWindowTouchEnd:function(j){this.$37h(j),this.$26h(j)},$37h:function(j){var q=this.$22h;2===this.$35h&&(this.$35h=3,q.handleDragAndDrop(j,"end"))},handleWindowMouseMove:function(j){this.handleWindowTouchMove(j)},handleWindowTouchMove:function(j){var q=this,_=q.$22h,V=q.$23h,P=q.$24h,i=q.$25h,S=T.getClientPoint(j),y=_._29I,U=q.$36h;1===q.$35h||2===q.$35h?(q.$35h=2,_.handleDragAndDrop(j,"between"),Z(j)&&(j=j.touches[0]||j.changedTouches[0]),U.style.left=j.pageX-parseInt(U.width)/2+F,U.style.top=j.pageY-parseInt(U.height)/2+F):"p"===V?_.ty(i+S.y-P.y):"v"===V&&_.ty(i+(P.y-S.y)/y.height*_._59I)},handle_mousemove:function(j){this.handle_touchmove(j)},handle_touchmove:function(j){var q,_,V,P;!T.isDragging()&&T.isLeftButton(j)&&(V=(_=this).$22h,q=_.$27h(j),_.$24h?_.$23h||T.getDistance(T.getClientPoint(j),_.$24h)<2||(_.$23h=q?"v":"p",T.startDragging(_,j)):q?V._43o():0===_.$35h&&(_.$35h=1,V.handleDragAndDrop(j,"begin"),T.startDragging(_,j),Z(j)&&(j=j.touches[0]||j.changedTouches[0]),q=_.$36h=new Image,_=V.$10h[V.sm().ld().getId()].querySelector(".image-box"),V=parseInt(_.style.width),P=parseInt(_.style.height),q.draggable=!1,q.src=_.toDataURL(),q.width=V,q.height=P,q.style.position="absolute",q.style.left=j.pageX-V/2+F,q.style.top=j.pageY-P/2+F,i().appendChild(q)))},$27h:function(j){var q=this.$22h,_=q.getView(),V=_.getBoundingClientRect(),P=q._29I,j=j.clientX-V.left+_.scrollLeft;return q._41o()&&P.x+P.width-j<B}}),ht.widget.Palette=function(j){var q,_=this,V=_._view=l.createView(null,_);_.$9h={},_.$10h={},_.$4h={},_._29I={x:0,y:0,width:0,height:0},_._59I=0,_.dm(j||new ht.DataModel),V[b]="ht-widget-palette",_.$29h=new P(_),g(V,o,T.paletteContentBackground),g(V,K,"auto"),g(V,r,A),g(V,"-moz-"+r,A),g(V,"-webkit-"+S,k),g(V,"-moz-"+S,k),g(V,"-ms-"+S,k),g(V,S,k),g(V,"position","absolute"),g(V,"overflow","hidden"),m(V,_._79O=(j=x(),(q=j.style).msTouchAction=k,q.cursor="default",y&&q.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",p),q.position="absolute",q.left=O,q.top=O,j)),G(V,"dragstart",function(j){j.dataTransfer&&(j.dataTransfer.setData("Text","nodeid:"+j.target.$11h),j.dataTransfer.effectAllowed="all",_.$29h.$26h())})},V="Palette",j={ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_bnb:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:T.autoHideScrollBar,_scrollBarSize:T.scrollBarSize,_scrollBarColor:T.scrollBarColor,getViewRect:function(){return this._29I},ty:function(j){if(j==p)return this.getTranslateY();this.setTranslateY(j)},setTranslateY:function(j){var q;this.$32h==p&&(j=this.$33h(j),q=this.$30h,this.$30h=j,this.fp("translateY",q,j))},getTranslateY:function(){return this.$30h},setLayout:function(j){var q,_,V=this,P=V._layout;"smallicons"===(V._layout=j)?q=_=20:"iconsonly"===j?q=_=50:(q=70,_=50),V.setItemImageWidth(q),V.setItemImageHeight(_),V.setItemImagePadding(4),V.fp("layout",P,j)},getDataAt:function(j){for(var q=j.target;q&&q.$11h==p;)q=q.parentNode;if(q&&q.$11h!=p)return this.getDataModel().getDataById(q.$11h)},$20h:function(){var j=16;return y&&(j*=1.2),j},$19h:function(){return T.paletteTitleHeight},$18h:function(){var j=T.paletteSeparatorWidth,q=T.paletteTitleBackground,q=T.paletteSeparatorColor||T.brighter(q);return j+F+" solid "+q},$17h:function(j){g(j,"cursor","pointer"),g(j,"display","inline-block"),g(j,"margin-right",(y?8:4)+F),g(j,"vertical-align",Y)},$1h:function(j){var q=this,_=x(),V=x(),P=L("span"),i=(_[b]="palette-header",g(_,"position","relative"),g(_,o,T.paletteTitleBackground),g(_,"color",T.paletteTitleLabelColor),g(_,Y,O),g(_,r,A),g(_,"-moz-"+r,A),g(_,"padding","0 5px 0 0"),g(_,"border-top",q.$18h()),g(_,"width","100%"),g(_,"cursor","pointer"),g(_,"white-space","nowrap"),g(_,K,"hidden"),g(_,E,T.paletteTitleLabelFont),g(_,"line-height",q.$19h()+F),_.$11h=j.getId(),d()),S=q.$19h(),y=q.$20h(),U=(q.$17h(i),l.setCanvas(i,y,S),m(_,i),j.s("tools"));if(U)for(var Z=0;Z<U.length;Z++){var B=d();q.$17h(B),l.setCanvas(B,y,S),B[b]="palette-header-tool palette-header-tool"+j.getId()+"-"+Z,B.style.position="absolute",B.style.right=(y+10)*Z+"px",B.toolIndex=Z,m(_,B)}return i[b]="palette-toggle-icon-"+j.getId(),V[b]="palette-content",g(V,"max-height",0+F),g(V,E,T.paletteContentLabelFont),g(V,K,"hidden"),V.$11h=j.getId(),q.$9h[j.getId()]=V,P[X]=j.getName(),g(P,E,T.paletteTitleLabelFont),m(_,i),m(_,P),[_,V]},$2h:function(j){var q=this,_=q._layout,V=J&&j.s("draggable")?L("a"):x(),P=d(),i=x(),S=j.getName()||"",y=j.s("title")||j.getToolTip()||S,U=q._itemMargin,Z=(P[b]="image-box",q.getItemImageWidth()),B=q.getItemImageHeight();return l.setCanvas(P,Z,B),m(V,P),i[X]=S,i[b]="label-box","iconsonly"!==_&&m(V,i),V[b]="palette-item",g(V,"vertical-align",Y),g(V,"cursor","pointer"),g(V,"border-radius",5+F),g(V,"border","1px solid transparent"),g(V,"text-align","center"),g(V,"display","inline-block"),g(V,"margin-left",U+F),g(V,"margin-top",U+F),g(V,"color",T.paletteContentLabelColor),"smallicons"===_?(g(P,"vertical-align","middle"),g(V,"margin-left",2+F),g(V,"margin-top",2+F),g(V,"padding",2+F),g(V,"text-align","left"),g(i,"display","inline-block"),g(i,"min-width",q.$21h+q._itemMargin+F)):"largeicons"===_&&(g(i,"max-width",Z+F),g(i,"overflow","hidden")),V.$11h=j.getId(),y&&(V.title=y),j.s("draggable")&&!q.handleDragAndDrop&&(J?(V.href="#",g(V,"text-decoration",k)):(V.draggable="true",g(V,"transform","translate(0,0)"),g(V,"z-index","0"))),V},$16h:function(j,q,_,V){j=l.initContext(j),l.translateAndScale(j,0,0,1),j.clearRect(0,0,_,_),_=(_-V)/2;T.drawStretchImage(j,T.getImage(q),"fill",0,_,V,V),j.restore()},$15h:function(j){var q,_,V=j.getId(),V=this._view.querySelector(".palette-toggle-icon-"+V),j=j.isExpanded()?T.paletteCollapseIcon:T.paletteExpandIcon;V&&j&&(q=this.$19h(),_=this.$20h(),this.$16h(V,j,q,_))},_drawToolsIcon:function(j){var q=j.s("tools");if(q)for(var _=0;_<q.length;_++){var V=this._view.querySelector(".palette-header-tool"+j.getId()+"-"+_),P=q[_].icon,i=this.$19h(),S=this.$20h();this.$16h(V,P,i,S)}},$14h:function(j){var q,_,V,P=this,i=j.getId(),i=P.$10h[i].querySelector(".image-box"),S=j.getImage(),y=j.s("image.stretch");i&&S&&(i=l.initContext(i),q=P.getItemImagePadding(),q="smallicons"===P._layout?q/2:q,_=P.getItemImageWidth()-2*q,V=P.getItemImageHeight()-2*q,l.translateAndScale(i,0,0,1),i.clearRect(0,0,_,V),T.drawStretchImage(i,T.getImage(S),y,q,q,_,V,j,P,P.getBodyColor(j)),i.restore())},validateImpl:function(){var _=this,j=_.$9h,q=_._layout,V=_.$10h,P=_.$4h,i=_._view,S=_.dm();if(_.$13h&&(delete _.$13h,P={},S.each(function(j){P[j.getId()]=j})),"smallicons"===q)for(var y in P){var U=P[y];U instanceof a&&(U=U.getName()||"",U=T.getTextSize(T.paletteContentLabelFont,U).width,_.$21h!=p&&_.$21h>U||(_.$21h=U))}for(y in P){var Z,B,x,d,g,b,Y,l,k,E=P[y];S.contains(E)?E instanceof ht.Group?(x=_.$1h(E),(g=V[E.getId()])&&(Z=g.nextSibling,w(i,Z),w(i,g)),g=S.getSiblings(E).indexOf(E),(B=i.children[2*g]||_._79O)&&B.parentNode?(i.insertBefore(x[0],B),i.insertBefore(Z||x[1],B)):(i.appendChild(x[0]),i.appendChild(Z||x[1])),V[E.getId()]=x[0],d=j[E.getId()]=Z||x[1],B=E.$12h,x=E.s("promptText"),B||(E.$12h=L("div"),E.$12h[X]=x||"",B=E.$12h),0===E.getChildren().size()?d.contains(B)||m(d,B):d.contains(B)&&w(d,B)):(b=E.getParent())&&(x=_.$2h(E),Y=V[E.getId()],d=j[b.getId()],Y&&w(Y.parentNode,Y),g=S.getSiblings(E).indexOf(E),(Y=d.children[g])?d.insertBefore(x,Y):m(d,x),V[E.getId()]=x,_.$14h(E)):(l=(Y=V[E.getId()]).parentNode,E instanceof ht.Group?(k=Y.nextSibling,w(i,Y),w(i,k),delete j[E.getId()]):(w(l,Y),0===l.children.length&&(b=S.getDataById(l.$11h))&&(B=b.$12h)&&!l.contains(B)&&m(l,B)),delete V[E.getId()])}_.$4h={};function o(){var j=_._59I,q=0;_.$32h!=p&&(clearInterval(_.$32h),q=0,delete _.$32h),_.$32h=setInterval(function(){_.$31h(),j===_._59I?2<=++q&&(clearInterval(_.$32h),delete _.$32h):(q=0,j=_._59I)},30)}var A,r;for(A in j)d=j[A],E=S.getDataById(j[A].$11h),_.$15h(E),_._drawToolsIcon(E),E.isExpanded()?(d.style.maxHeight===0+F?(r=d.scrollHeight+_._itemMargin+F,I(d).duration(200).set(H,r).set("padding-bottom",_._itemMargin+F).end(function(){o()})):d.style.maxHeight=d.scrollHeight+F,d.style.paddingBottom=_._itemMargin+F):d.style.maxHeight!==0+F&&I(d).duration(200).set(H,O).set("padding-bottom",O).end(function(){o()});_.$28h(),_.$31h()},$31h:function(){for(var j=this,q=j._view,_=0,V=q.children,P=0;P<V.length;P++){var i=V[P];i.className&&0<=i.className.indexOf("palette-")&&(_+=i.offsetHeight)}j._59I=_,j.$30h=j.$33h(j.ty());var S=j.ty();q.scrollTop=-S,j._29I={x:0,y:-S,width:q.clientWidth,height:q.clientHeight},g(j._79O,Y,-S+F),j._93I()},$33h:function(j){var q=this._29I.height-this._59I;return 0<(j=j<q?q:j)?0:Math.round(j)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(j){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(j.property)<0&&this.redraw(),"translateY"===j.property&&(this.iv(),this._43o())},findDataByName:function(j){for(var q=this.dm().getDatas(),_=0;_<q.size();_++){var V=q.get(_);if(V.getName()===j)return V}},setDataModel:function(j){var q=this,_=q._dataModel,V=q._selectionModel;_!==j&&(_&&(_.umm(q.$6h,q),_.umd(q.$8h,q),_.umh(q.$7h,q),V||_.sm().ums(q.$28h,q)),(q._dataModel=j).mm(q.$6h,q),j.md(q.$8h,q),j.mh(q.$7h,q),V?V._21I(j):j.sm().ms(q.$28h,q),q.sm().setSelectionMode("single"),q.fp("dataModel",_,j))},$6h:function(j){var q=this,_=q._view,V=j.data,P=q.$4h;"add"===j.kind||"remove"===j.kind?P[V.getId()]=V:"clear"===j.kind&&(q.$10h={},q.$9h={},q.$4h={},_[X]=""),q.iv()},$7h:function(j){j=j.data;this.$4h[j.getId()]=j,this.iv()},$8h:function(j){var q=j.data;"expanded"!==j.property&&(this.$4h[q.getId()]=q),this.iv()},$28h:function(){var q,_=this,j=_.sm(),V=j.ld();this.dm().each(function(j){(q=_.$10h[j.getId()])&&0<=q[b].indexOf("palette-item")&&(j===V?g(q,o,T.paletteItemSelectBackground):q.style.removeProperty(o))})}},T.def(ht.widget[V],q,j)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);