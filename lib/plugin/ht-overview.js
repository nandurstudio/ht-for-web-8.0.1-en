!function(l,B){"use strict";var l=l.ht,X=l.graph,A=l.Default,l=l.Color,L=null,j="px",U=A.getInternal(),y=U.getPinchDist,N=A.preventDefault,n=A.getTouchCount,u=A.startDragging;U.addMethod(A,{overviewBackground:l.widgetBackground,overviewMaskBackground:l.transparent,overviewContentBorderColor:l.widgetBorder,overviewContentBackground:l.background},!0),X.Overview=function(l){var B=this,X=B._view=U.createView(1,B);B._canvas=U.createCanvas(X),X.style.background=A.overviewBackground,X.appendChild(B._mask=U.createDiv()),B.setGraphView(l),B.addListeners()},A.def("ht.graph.Overview",B,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:A.overviewMaskBackground,_contentBorderColor:A.overviewContentBorderColor,_contentBackground:A.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(l){var B,X=this;X.gv!==l&&(B=X.gv,X.gv=l,B&&(B.removeViewListener(X.handleGraphViewChanged,X),B.ump(X.handleGraphViewPropertyChanged,X)),l&&(l.addViewListener(X.handleGraphViewChanged,X),l.mp(X.handleGraphViewPropertyChanged,X)),X.fp("graphView",B,l),X.redraw())},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(l){this.redraw()},handleGraphViewChanged:function(l){this._autoUpdate&&"validate"===l.kind&&this.redraw()},handleGraphViewPropertyChanged:function(l){"canvasBackground"!==l.property&&(!this.getFixToRect()||"zoom"!==l.property&&"translateX"!==l.property&&"translateY"!==l.property)||this.redraw()},redraw:function(){var l=this;l._redraw||(l._redraw=1,l.iv(50))},validateImpl:function(){var l,B,X,K,y,N,n,u,f,M,o,d,g,F=this,z=F.gv,T=F._canvas,J=F.getWidth(),e=F.getHeight(),W=F._redraw,w=A.devicePixelRatio;z?(l=F._mask.style,B=z.getViewRect(),X=(g=(g=this.getFixToRect())?"boolean"==typeof g?z.getContentRect():g:z.getScrollRect()).x,K=g.y,y=g.width,N=g.height,n=F._rate=Math.max(y/J,N/e),u=F._x=(J-y/n)/2,f=F._y=(e-N/n)/2,0!==B.width&&0!==B.height||F.hasRetry||(A.callLater(F.iv,F,L),F.hasRetry=!0),J===T.clientWidth&&e===T.clientHeight||(U.setCanvas(T,J,e),W=1),U.isSameRect(g,F._scrollRect)||(F._scrollRect=g,W=1),W&&(M=U.initContext(T),o=(g=z.getDataModel()).getBackground()||F._contentBackground,d=F._contentBorderColor,M.clearRect(0,0,J*w,e*w),g=g.getBackground()&&0<g.a("width")&&0<g.a("height"),o&&!g&&U.fillRect(M,u*w,f*w,y/n*w,N/n*w,o),U.translateAndScale(M,-X/n+u,-K/n+f,1/n),z._42(M),M.restore(),d&&U.drawBorder(M,d,u*w,f*w,y/n*w,N/n*w)),l.background=F._maskBackground,l.left=u+(B.x-X)/n+j,l.top=f+(B.y-K)/n+j,l.width=B.width/n+j,l.height=B.height/n+j,F._redraw=null):W&&((M=U.initContext(T)).clearRect(0,0,J*w,e*w),M.restore(),F._redraw=null)},center:function(l){var B,X,K,y,N,n=this,u=n.gv;u&&(B=u._zoom,X=u._29I,K=n._rate,N=n._scrollRect,l=A.getLogicalPoint(l,n._canvas),y=N.x+(l.x-n._x)*K,N=N.y+(l.y-n._y)*K,u.setTranslate((X.width/2-y)*B,(X.height/2-N)*B))},handle_mousedown:function(l){this.handle_touchstart(l)},handleWindowMouseUp:function(l){this.handleWindowTouchEnd(l)},handleWindowMouseMove:function(l){this.handleWindowTouchMove(l)},handle_mousewheel:function(l){this.handleScroll(l,l.wheelDelta)},handle_DOMMouseScroll:function(l){2===l.axis&&this.handleScroll(l,-l.detail)},handleScroll:function(l,B){N(l),this.gv&&(l=this.gv,0<B?l.scrollZoomIn():B<0&&l.scrollZoomOut())},handle_touchstart:function(l){var B,X,K;N(l),this.gv&&A.isLeftButton(l)&&(X=(B=this).gv,1===(K=n(l))?A.isDoubleClick(l)&&X.isResettable()?X.reset():(B.center(l),u(B,l)):2===K&&(B._dist=y(l),u(B,l)))},handleWindowTouchEnd:function(l){delete this._dist},handleWindowTouchMove:function(l){var B,X;this.gv&&(B=this._dist,1===(X=n(l))?this.center(l):2===X&&B!=L&&this.gv.handlePinch(L,y(l),B))}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);