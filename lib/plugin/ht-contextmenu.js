!function(v,i){"use strict";function Z(){return document}function l(c,$){return c.querySelectorAll($)}function D(c){var $=Z().createElement(c);return"ul"===c&&(d($,n,"relative"),d($,f,w),d($,S,w),d($,"list-style",E),d($,"box-sizing","border-box"),d($,"-moz-box-sizing","border-box"),d($,R,"inline-block"),d($,"vertical-align","text-bottom"),d($,"border","1px solid "+_.contextMenuBorderColor),d($,"box-shadow","0 0 16px 1px "+_.contextMenuShadowColor),d($,"overflow","hidden"),_.contextMenuBorderRadius&&d($,"border-radius",_.contextMenuBorderRadius+h)),$}function u(c){var $=c.touches[0];return $||c.changedTouches[0]}function p(){return D("div")}function T(){return D("canvas")}function d(c,$,V){c.style.setProperty($,V,x)}function s(c,$){c.appendChild($)}function e(c){var $=this,V=c._view,c=($.$11b=c,$.addListeners(),m(V,"contextmenu",function(c){c.preventDefault()}),$.$37b=$.$36b.bind($));m(V,"mouseover",c),m(V,"mouseout",c)}var Q=v.ht,n="position",U="absolute",h="px",N="left",J="top",Y="innerHTML",H="className",L="width",B="height",w="0",R="display",E="none",r="visibility",O="user-select",f="margin",S="padding",x=null,c=Q.Color,_=Q.Default,P=_.getInternal(),X=v.setTimeout,G=v.setInterval,I=v.clearTimeout,a=v.clearInterval,o=v.parseInt,t=_.isLeftButton,C=_.isDragging,k=_.startDragging,g=_.getDistance,b=_.isTouchable,A=_.isTouchEvent,q=_.getPagePoint,F=_.isRightButton,z=c.widgetIconHighlight,$=c.widgetIconBorder,c=c.widgetIconGradient,m=P.addEventListener,V=P.removeEventListener;P.addMethod(_,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:$},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:z}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:$},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:z,gradient:_.imageGradient,gradientColor:c,background:z}]},contextMenuLabelFont:(b?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);_.def(e,i,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(c){if(_.preventDefault(c),t(c)){for(var $=this,V=$.$11b,O=$.getView().children,E=0;E<O.length;E++){var v=O[E],o=v.$24b,i=v.$25b;if(o&&o.contains(c.target))return V.scrollUp(v),$.$28b=X(function(){$.$29b=G(function(){V.scrollUp(v)},100)},500),void k($,c);if(i&&i.contains(c.target))return V.scrollDown(v),$.$28b=X(function(){$.$29b=G(function(){V.scrollDown(v)},100)},500),void k($,c)}$.$30b=q(c)}},handle_mousedown:function(c){this.handle_touchstart(c)},handle_touchend:function(c){if(t(c)){var $=this,V=$.$30b,O=A(c)?{x:u(c).pageX,y:u(c).pageY}:{x:c.pageX,y:c.pageY};if(!V||1<g(V,O))delete $.$30b;else{for(var V=$.getView(),O=$.$11b,E=c.target,v=x,o=x,i=O._items,X=V.$26b,k=0;k<X.length;k++)if((o=X[k]).contains(E)){v=o.getAttribute("data-id");break}v&&i&&((V=O.$17b(i,function(c){return c._id===v}))&&(i=!1,V.disabled instanceof Function?i=V.disabled.call(O,V):!0===V.disabled&&(i=!0),i||(V.items?A(c)&&$.$36b(o,!0):O.$1b(V,c)))),delete $.$30b}}},$36b:function(c,$){if(!C()){var V,O=this.$11b,E=this.getView(),v=O.$20b||E.children[0],o=O._currentMenuLi,i=E.$26b,X=E.children,k=c.target,P=E.getBoundingClientRect(),D=_.getWindowInfo(),Q=D.width,B=D.height,Z=function(c){for(var $=0;$<X.length;$++){var V=X[$],O=new RegExp(c+"$"),E=V[H];if(E&&(O.test(E)||0<=E.indexOf(c+" ")))return V}},l=function(c){for(var $=0;$<i.length;$++){var V=i[$],O=new RegExp(c+"$"),E=V[H];if(E&&(O.test(E)||0<=E.indexOf(c+" ")))return V}};if($)V=c;else{if("mouseover"===c.type){for(var u=0;u<i.length;u++){var p=i[u];if(p.contains(k)){V=p;break}}!V&&o&&(D=o.parentNode,(($=Z("submenu"+o.getAttribute("data-id")))&&$.contains(k)||D&&D.contains(k))&&(V=o))}else if("mouseout"===c.type){for(var s=!1,n=c.relatedTarget,u=0;u<X.length;u++){var U=X[u];if("hidden"!==U.style.visibility&&U.contains(n)){s=!0;break}}if(s)return}!V&&v&&(V=l("menu-item"+(v.$45b||"NaN")))}if(V!=o){if(o)for(var Y=o;Y;){Y[H]=Y[H].replace(" menu-item-hover",""),Y[H].indexOf("disabled")<0&&(null!=(L=O.getItemByProperty("_id",Y.getAttribute("data-id"))).background?L.background instanceof Function?d(Y,"background-color",L.background.call(O,L)):d(Y,"background-color",L.background):d(Y,"background-color",_.contextMenuBackground),d(Y,"color",_.contextMenuLabelColor));var L=Z("submenu"+Y.getAttribute("data-id")),w=(L&&d(L,r,"hidden"),Y.parentNode),Y=l("menu-item"+(w.$45b||"NaN"))}if(V){for(var R=V,x=[];R;){R[H]+=" menu-item-hover",R[H].indexOf("disabled")<0&&(d(R,"background-color",_.contextMenuHoverBackground),d(R,"color",_.contextMenuHoverLabelColor));var t=Z("submenu"+R.getAttribute("data-id")),w=(t&&(d(t,r,"visible"),x.push(t)),R.parentNode),R=l("menu-item"+(w.$45b||"NaN"))}x.reverse(),x.forEach(function(c){var $,V,O,E,v,o;$=l("menu-item"+(c=c).$45b).getBoundingClientRect(),V=$.top-P.top,O=$.left-P.left,d(c,J,V+h),d(c,N,O+$.width+h),$=c.getBoundingClientRect(),E=$.top,v=$.left,o=$.height,$=$.width,E=E+o+2,o=v+$+2,B<E&&d(c,J,V+B-E+h),Q<o&&d(c,N,O-$+h)})}}O.setCurrentMenuItem(V),O.$20b=V?V.parentNode:E.children[0]}},handle_mouseup:function(c){this.handle_touchend(c)},handleWindowTouchEnd:function(c){var $=this;$.$28b!=x&&(I($.$28b),delete $.$28b),$.$29b!=x&&(a($.$29b),delete $.$29b),delete $.$34b,delete $.$30b,delete $.$35b},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},handle_mousemove:function(c){this.handle_touchmove(c)},handle_touchmove:function(c){if(!C()&&t(c)){for(var $=this,V=$.getView().children,O=x,E=0;E<V.length;E++){var v=V[E];if(v.contains(c.target)){O=v;break}}var o=$.$30b,i=A(c)?{x:u(c).pageX,y:u(c).pageY}:{x:c.pageX,y:c.pageY};O&&o&&2<g(o,i)&&(k($,c),$.$34b=O,$.$35b=O.$18b)}},handleWindowTouchMove:function(c){c.preventDefault();var $=this.$11b,V=this.$34b,O=this.$35b,E=this.$30b;E&&V&&(0<(c=(A(c)?{x:u(c).pageX,y:u(c).pageY}:{x:c.pageX,y:c.pageY}).y-E.y)?$.scrollUp(V,V.$18b-(O-c)):$.scrollDown(V,O-c-V.$18b))},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},$10b:function(c,$){c.preventDefault();for(var V,O,E=this.getView().children,v=x,o=0;o<E.length;o++){var i=E[o];if(i.contains(c.target)){v=i;break}}v&&(O=(V=this.$11b).getRowHeight(),.05<Math.abs($)&&(0<$?V.scrollUp(v,$*O):$<0&&V.scrollDown(v,-$*O)))},handle_mousewheel:function(c){this.$10b(c,c.wheelDelta/40)},handle_DOMMouseScroll:function(c){this.$10b(c,-c.detail)},$44b:function(c){this.getView().contains(c.target)||this.$11b.hide()},$41b:function(c){_.preventDefault(c)},$4b:function(c,$){var V,O,E=this.$11b;($=$||E._items)&&$.length&&c.keyCode&&(O=[c.keyCode],c.shiftKey&&O.push(16),c.ctrlKey&&O.push(17),c.altKey&&O.push(18),/mac/.test(v.navigator?v.navigator.userAgent.toLowerCase():"")?c.metaKey&&O.push(17):c.metaKey&&O.push(91),O.sort(),V=O.join(),(O=E.$17b($,function(c){if(c.key)return(c=c.key.slice(0)).sort(),V===c.join()}))&&(!1!==O.preventDefault&&c.preventDefault(),$=!1,O.disabled instanceof Function?$=O.disabled.call(E,O):!0===O.disabled&&($=!0),$||E.$1b(O,c)))},$39b:function(c){this.$32b=q(c)},$38b:function(c){var $;_.preventDefault(c),t(c)||(($=this)._showContextMenu=F(c),$._showContextMenu||($.$31b=q(c),$.$33b=X(function(){$._showContextMenu=!0,delete $.$33b},600)))},$40b:function(c){var $=this;$._showContextMenu&&(F(c)||$.$31b&&(!$.$32b||g($.$31b,$.$32b)<10))&&$.$11b.show(c),$.$33b!=x&&(I($.$33b),delete $.$33b),delete $.$31b,delete $.$32b}}),Q.widget.ContextMenu=function(c){var $=this,V=$._view=P.createView(null,$);V[H]="ht-widget-contextmenu",$.setItems(c),$.$13b=new e($),d(V,"font",_.contextMenuLabelFont),d(V,n,U),d(V,"cursor","default"),d(V,"-webkit-"+O,E),d(V,"-moz-"+O,E),d(V,"-ms-"+O,E),d(V,O,E),d(V,"box-sizing","border-box"),d(V,"-moz-box-sizing","border-box"),_.baseZIndex!=x&&d(V,"z-index",o(_.baseZIndex)+2+""),$.$3b=function(c){$.$13b.$4b(c)}},c={$16b:x,$5b:0,_items:x,$21b:x,$19b:x,_enableGlobalKey:!($="ContextMenu"),ms_v:1,ms_ac:["currentMenuItem"],enableGlobalKey:function(){!1===this._enableGlobalKey&&(m(Z(),"keydown",this.$3b),this._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,V(Z(),"keydown",this.$3b)},setItems:function(c){this._items=c},getItems:function(){return this._items},getVisibleFunc:function(){return this.$16b},setVisibleFunc:function(c){this.$16b=c},setLabelMaxWidth:function(c){this.$43b=c},$1b:function(c,$){var V;"check"===c.type?c.selected=!c.selected:"radio"===c.type&&(V=c.groupId,this.$17b(this._items,function(c){c.groupId===V&&(c.selected=!1)}),c.selected=!0),this.hide(),c.action?c.action.apply(c.scope||this,[c,$]):c.href&&($=c.linkTarget||"_self",v.open(c.href,$))},getItemById:function(c){return this.getItemByProperty("id",c)},setItemVisible:function(c,$){c=this.getItemById(c);c&&(c.visible=$)},getItemByProperty:function($,V,c){return(c=c||this._items)&&0!==c.length&&this.$17b(c,function(c){return c[$]===V})||x},scrollUp:function(c,$){var V;0!==($=o($=$==x?20:$))&&(V=0,c.$18b>$&&(V=c.$18b-$),this.$42b(c,V),c.scrollTop=V,c.$18b=V)},scrollDown:function(c,$){var V,O,E;0!==($=o($=$==x?20:$))&&(E=(V=c.$22b)-(O=c.$23b),O+c.$18b+$<V&&(E=c.$18b+$),this.$42b(c,E),c.scrollTop=E,c.$18b=E)},$42b:function(c,$){$=$==x?c.$18b:$;var V=c.$24b,O=c.$25b;V&&(d(V,"top",$+h),d(V,R,0==$?E:"block")),O&&(d(O,"bottom",-$+h),$==c.$22b-c.$23b?d(O,R,E):d(O,R,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(c,$){for(var V=0;V<c.length;V++){var O=c[V];if($(O))return O;if(O.items){O=this.$17b(O.items,$);if(O)return O}}},$2b:function(c,$){for(var V=this,O=0;O<c.length;O++){V.$5b++;var E,v,o,i,X,k,P=c[O];!1===P.visible?this._clearItemId(P):_.isFunction(P.visible)&&!1===P.visible()||V.$16b&&!V.$16b.call(V,P)?this._clearItemId(P):(E=D("li"),v=V.$5b+"",d(E,"white-space","nowrap"),d(E,R,"block"),"separator"===P||!0===P.separator?((o=p())[H]="separator",d(o,B,_.contextMenuSeparatorWidth+h),d(o,"background",_.contextMenuSeparatorColor),s(E,o)):(P._id=v,E.setAttribute("data-id",v),o=D("span"),i=D("span"),k=T(),X=p(),d(o,R,"inline-block"),d(o,B,"1.2em"),d(i,R,"inline-block"),d(i,B,"1.2em"),d(i,"line-height","1.2em"),k[H]="prefix",d(k,R,"inline-block"),d(k,L,"1em"),d(k,B,"1em"),d(k,"vertical-align","middle"),d(k,f,"0 0.2em"),"check"===P.type&&P.selected?k[H]+=" check-prefix":"radio"===P.type&&P.selected&&(k[H]+=" radio-prefix"),k._item=P,s(E,k),P.icon&&((k=T())[H]="contextmenu-item-icon",d(k,R,"inline-block"),d(k,B,"1.2em"),d(k,L,"1.2em"),d(k,"margin-right","0.2em"),d(k,"float","left"),k.$50b=P.icon,k._item=P,s(o,k)),i[Y]=P.label,s(o,i),s(E,o),X[H]="suffix",d(X,R,"inline-block"),d(X,"margin-left","1em"),d(X,"margin-right","0.4em"),d(X,"text-align","right"),d(X,"font-size","75%"),P.items&&(X[Y]=_.contextMenuSubmenuMark),P.suffix&&(X[Y]=P.suffix),s(E,X),E[H]="menu-item menu-item"+v,null!=P.background?P.background instanceof Function?d(E,"background-color",P.background.call(V,P)):d(E,"background-color",P.background):d(E,"background-color",_.contextMenuBackground),d(E,"color",_.contextMenuLabelColor),d(E,S,"3px 0"),P.disabled instanceof Function?P.disabled.call(V,P)&&(E[H]+=" disabled",d(E,"color",_.contextMenuDisabledLabelColor)):P.disabled&&(E[H]+=" disabled",d(E,"color",_.contextMenuDisabledLabelColor)),P.items&&(V.$21b||(V.$21b=new Q.List),(k=D("ul"))[H]="submenu"+v,k.$45b=v,d(k,r,"hidden"),d(k,n,U),s(V._view,k),V.$21b.add(k),V.$2b(P.items,k))),s($,E))}},setCurrentMenuItem:function(c){if(this._currentMenuLi=c,this.$19b=x,this.iv(),c){var $=this._items;if($&&0!==$.length)for(var V=c.getAttribute("data-id"),O=0,E=$.length;O<E;O++)if(V===(c=$[O])._id)return void(this.$19b=c)}},rebuild:function(){var c,$=this,V=$._items,O=$._view;O&&(O[Y]="",$.$21b=x,$.$5b=0,$._currentMenuLi=x,$.$19b=x,$.$20b=x,O.$26b=x,V&&0!==V.length&&(c=D("ul",$._r),s(O,c),$.$2b(V,c)))},addTo:function(c){var $,V,O,E,v;c&&(V=($=this).$13b,$.$12b=c,$.$9b=function(c){V.$44b(c)},O=$.$6b=function(c){V.$38b(c)},E=$.$7b=function(c){V.$39b(c)},v=$.$8b=function(c){V.$40b(c)},_.mockTouch&&(m(c,"touchstart",O,!0),m(c,"touchmove",E),m(c,"touchend",v)),m(c,"mousedown",O,!0),m(c,"mousemove",E),m(c,"mouseup",v),$.$27b=function(c){V.$41b(c)},m(c,"contextmenu",$.$27b))},showOnView:function(c,$,V){c=c.getView?c.getView():c;var O=_.getWindowInfo(),c=c.getBoundingClientRect();this.show(c.left+O.left+$,c.top+O.top+V)},show:function(c,$,V){var O,E,v,o,i,X,k,P,D,Q=this,V=V==x,B=Q._view;B&&(Q.invalidate(),1===arguments.length&&($=A(k=c)?(c=(v=u(k)).pageX,v.pageY):(c=k.pageX,k.pageY)),O=(v=_.getWindowInfo()).width,E=v.height,D=(v={pageX:c,pageY:$,clientX:c-(c=v.left),clientY:$-($=v.top),target:1,originEvent:k}).clientX,P=v.clientY,o=function(c){c.style.height=E-6+h;function $(c){d(c,n,U),d(c,"text-align","center"),d(c,L,"100%"),d(c,"font-size",10+h),d(c,"padding","2px 0"),d(c,"border","0px solid "+_.contextMenuScrollerBorderColor),d(c,"background-color",_.contextMenuScrollerColor1),c.style.backgroundImage="-webkit-linear-gradient(top, "+_.contextMenuScrollerColor1+", "+_.contextMenuScrollerColor2+")",c.style.backgroundImage="linear-gradient(to bottom, "+_.contextMenuScrollerColor1+", "+_.contextMenuScrollerColor2+")"}var V=p(),O=p();V[H]="menu-arrow-item menu-arrow-item-top",O[H]="menu-arrow-item menu-arrow-item-bottom",$(V),d(V,"top",w),d(V,"left",w),d(V,"border-bottom-width",1+h),V[Y]="▲",$(O),d(O,"bottom",w),d(O,"left",w),d(O,"border-top-width",1+h),O[Y]="▼",c.$24b=V,c.$25b=O,c.$18b=c.scrollTop,c.$22b=c.scrollHeight,c.$23b=c.clientHeight,s(c,V),s(c,O),Q.$42b(c)},Q.beforeShow&&Q.beforeShow(v),(i=Q._items)&&(k&&k.preventDefault(),i.length&&(Q.rebuild(),(B.$26b=l(B,".menu-item")).length&&(_.appendToScreen(B),(k=B.children[0]).offsetHeight>E&&o(k),i=P+(V?1:0),V=D+(V?1:0),(X=function(c){for(var $,V,O,E,v,o,i=0,X=0,k=0,P=Q.$43b;k<c.children.length;k++)(O=c.children[k]).getAttribute("data-id")&&(E=O.children[1],v=O.children[2],$=E.children,P&&(V=$[0],(V=1<$.length?$[1]:V).offsetWidth>P&&(V[Y]="<marquee scrollamount='3'>"+V[Y]+"</marquee>",V.children[0].style.verticalAlign="text-bottom",d(V,L,P+h),d(V,R,"inline-block"))),i<($=E.offsetWidth)&&(i=$),X<(V=v.offsetWidth)&&(X=V));for(k=0;k<c.children.length;k++)(O=c.children[k]).getAttribute("data-id")&&(E=O.children[1],v=O.children[2],o=E.children[0],!E.children[1]&&o.style.width&&d(o,L,i+h),d(E,L,i+h),d(v,L,X+h))})(k),k=P+3+B.offsetHeight,P=D+3+B.offsetWidth,d(B,J,E<k?i-(k-E)+$+h:i+$+h),d(B,N,O<P?V-(P-O)+c+h:V+c+h),(D=Q.$21b)&&D.each(function(c){X(c),c.offsetHeight>E&&o(c)}),Q.$9b&&(_.mockTouch&&m(Z(),"touchstart",Q.$9b,!0),m(Z(),"mousedown",Q.$9b,!0)),Q.afterShow&&Q.afterShow(v),Q.$47b()))))},isShowing:function(){return!!this._view&&this._view.parentNode!=x},getRelatedView:function(){return this.$12b},hide:function(){var c=this,$=c._view;$&&$.parentNode&&($.parentNode.removeChild($),_.mockTouch&&V(Z(),"touchstart",c.$9b,!0),V(Z(),"mousedown",c.$9b,!0),c.afterHide&&c.afterHide())},dispose:function(){var c=this,$=c.$12b;c._view&&(this.hide(),c.disableGlobalKey(),$&&(_.mockTouch&&(V($,"touchstart",c.$6b,!0),V($,"touchmove",c.$7b),V($,"touchend",c.$8b)),V($,"mousedown",c.$6b,!0),V($,"mousemove",c.$7b),V($,"mouseup",c.$8b),V($,"contextmenu",c.$27b)),c._view=c._items=c.$21b=c._currentMenuLi=c.$19b=c.$12b=c.beforeShow=c.afterShow=c.afterHide=c.$9b=c.$3b=c.$6b=c.$7b=c.$8b=c.$27b=x)},$46b:function(c,$,V,O,E){c=P.initContext(c);P.translateAndScale(c,0,0,1),c.clearRect(0,0,V,O),_.drawStretchImage(c,_.getImage($),"fill",0,0,V,O,E,this),c.restore()},$47b:function(){var c=this._view;if(this.isShowing()){for(var $=l(c,".check-prefix"),V=0;V<$.length;V++){var O=$[V],E=O.clientWidth,v=O.clientHeight;O.$48b=E,O.$49b=v,P.setCanvas(O,E,v)}var o=l(c,".radio-prefix");for(V=0;V<o.length;V++){var i=o[V];E=i.clientWidth,v=i.clientHeight,i.$48b=E,i.$49b=v,P.setCanvas(i,E,v)}var X=l(c,".contextmenu-item-icon");for(V=0;V<X.length;V++){var k=X[V];E=k.clientWidth,v=k.clientHeight,k.$48b=E,k.$49b=v,P.setCanvas(k,E,v)}}},validateImpl:function(){var c=this,$=c._view;if(c.isShowing()){for(var V=l($,".check-prefix"),O=0;O<V.length;O++){var E=V[O],v=E.$48b,o=E.$49b;v&&o&&c.$46b(E,_.contextMenuCheckIcon,v,o,E._item)}var i=l($,".radio-prefix");for(O=0;O<i.length;O++){var X=i[O];v=X.$48b,o=X.$49b,v&&o&&c.$46b(X,_.contextMenuRadioIcon,v,o,X._item)}var k=l($,".contextmenu-item-icon");for(O=0;O<k.length;O++){var P=k[O];v=P.$48b,o=P.$49b,v&&o&&c.$46b(P,_.getImage(P.$50b),v,o,P._item)}}},_clearItemId:function(c){var $=this;delete c._id,c.items&&c.items.forEach(function(c){$._clearItemId(c)})}},_.def(Q.widget[$],i,c)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);