!function(T,w){"use strict";function n(T){return P().createElement(T)}function O(){return n("canvas")}function d(T,w,n){T.style.setProperty(w,n,Fi)}function Q(T,w){T.appendChild(w)}function L(T,w){T.removeChild(w)}var j,A="position",F="absolute",x="px",U="left",p="right",i="top",R="bottom",B="display",f=ht.Default,G=f.getInternal(),e=Math.floor,Y=Math.ceil,V=Math.PI,Fi=null,J=T.parseInt,P=function(){return document},k=(G=f.getInternal()).addEventListener,u=G.removeEventListener;ht.widget.RulerFrame=function(T){var n=this,j=n._view=G.createView(null,n),w=n.$1k=O(),f=n.$2k=O(),L=n.$3k=O(),Y=n.$4k=O();n._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},n._topRulerConfig={visible:!0},n._rightRulerConfig={visible:!1},n._bottomRulerConfig={visible:!1},n._leftRulerConfig={visible:!0},Q(j,w),Q(j,L),Q(j,f),Q(j,Y),d(j,A,"relative"),d(j,"box-sizing","border-box"),d(j,"-moz-box-sizing","border-box"),d(w,A,F),d(f,A,F),d(L,A,F),d(Y,A,F),n.$14k=function(T){n.$13k=1,n.iv()},n.$15k=function(T){var w;(n._topRulerConfig.guideVisible||n._rightRulerConfig.guideVisible||n._bottomRulerConfig.guideVisible||n._leftRulerConfig.guideVisible||n._defaultRulerConfig.guideVisible||(n._topRulerConfig.guideTipVisible||n._rightRulerConfig.guideTipVisible||n._bottomRulerConfig.guideTipVisible||n._leftRulerConfig.guideTipVisible||n._defaultRulerConfig.guideTipVisible)&&n._component)&&(w=j.getBoundingClientRect(),n.$16k={x:T.clientX-w.left,y:T.clientY-w.top},n.$5k())},n.setComponent(T)},T="RulerFrame",j={ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(T){var w,n=this,j=n._component,f=n.getView();f&&(n._component=T,n.fp("component",j,T),j&&(w=n.getComponentView(j),L(f,w),u(f,"mousemove",n.$15k),n.removeComponentPropertyChangeListener(j,n.$14k)),T&&(w=n.getComponentView(T),Q(f,w),d(w,A,F),k(f,"mousemove",n.$15k),n.addComponentPropertyChangeListener(T,n.$14k)))},addComponentPropertyChangeListener:function(T,w){T&&T.mp&&T.mp(w)},removeComponentPropertyChangeListener:function(T,w){T&&T.ump&&T.ump(w)},getComponentHZoom:function(T){return T&&T.getZoom?T.getZoom():1},getComponentVZoom:function(T){return T&&T.getZoom?T.getZoom():1},getComponentViewRect:function(T){if(T&&T.getViewRect)return T.getViewRect()},getComponentView:function(T){return T&&T.getView?T.getView():T},invalidateComponent:function(T){T&&T.iv&&T.iv()},validateComponent:function(T){T&&T.validate&&T.validate()},$7k:function(T,w,n,j,f,L,Y,O,Q,A,F,P){var k,u,x,U,p;w.visible?(p=this._defaultRulerConfig,k=w[k="borderStyle"]||p[k],u=w[u="borderColor"]||p[u],x=w[x="borderWidth"]||p[x],U=(w.size!=Fi?w:p).size,p=w[w="background"]||p[w],w=this.$6k(x,k,u,T,n,f,U+x,Y,O,Q,A,F,P),d(T,f,"0px"),L?G.setCanvas(T,j-w,U):G.setCanvas(T,U,j-w),d(T,"background",p),d(T,B,"block")):(d(T,B,"none"),d(this.getComponentView(this._component),f,"0px"))},$6k:function(T,w,n,j,f,L,Y,O,Q,A,F,P,k){var u=0;return d(j,f,T+"px "+w+" "+n),d(this.getComponentView(this._component),L,Y+x),O?(d(j,Q,A+x),u+=A):d(j,Q,"0px"),F?(d(j,P,k+x),u+=k):d(j,P,"0px"),u},validateImpl:function(){var T,w,n,j=this,f=j._component,L=j.$1k,Y=j.$2k,O=j.$3k,Q=j.$4k,A=j._view,F=j._defaultRulerConfig,P=j._topRulerConfig,k=j._rightRulerConfig,u=j._bottomRulerConfig,x=j._leftRulerConfig,F=F.size;A&&f&&(T=P.size!=Fi?P.size:F,w=k.size!=Fi?k.size:F,n=u.size!=Fi?u.size:F,F=x.size!=Fi?x.size:F,j.$7k(L,P,"border-bottom",A.offsetWidth,i,!0,x.visible,U,F,k.visible,p,w),j.$7k(Y,k,"border-left",A.offsetHeight,p,!1,P.visible,i,T,u.visible,R,n),j.$7k(O,u,"border-top",A.offsetWidth,R,!0,x.visible,U,F,k.visible,p,w),j.$7k(Q,x,"border-right",A.offsetHeight,U,!1,P.visible,i,T,u.visible,R,n),j.$13k?delete j.$13k:j.invalidateComponent(f),j.validateComponent(f),j.$5k())},$5k:function(){var s=this,T=s.$1k,w=s.$2k,n=s.$3k,j=s.$4k,f=s._topRulerConfig,L=s._rightRulerConfig,Y=s._bottomRulerConfig,O=s._leftRulerConfig,Q=s._defaultRulerConfig,A=s._component,F=s.getComponentViewRect(A),l=s.getComponentHZoom(A),C=s.getComponentVZoom(A),G=F.x*l,e=G+F.width*l,V=F.y*C,J=V+F.height*C,E=s._defaultRulerConfig.size,_="defaultMajorTickSpacing",a="maxPhysicalMajorTickSpacing",r="minPhysicalMajorTickSpacing",N="tickSpacingAdaptable",v="majorTickTextFont",H="majorTickTextColor",K="majorTickColor",y="minorTickColor",q="guideVisible",g="guideTipVisible",h="guideTipBorderColor",z="guideTipTextColor",m="guideTipTextFont",t="guideTipBackground",c="guideColor",S="guideWidth",X="minMajorTickSpacing",Z=Q[_],M=Q[a],o=Q[r],$=Q[N],W=Q[v],b=Q[H],I=Q[K],Ti=Q[X],wi=Q[y],ni=Q[q],ji=Q[g],fi=Q[h],Li=Q[z],Yi=Q[m],Oi=Q[t],Qi=Q[c],Ai=Q[S];function P(T,w,n,j,f,L){var Y,O,Q,A,F,P,k,u,x,U,p,d,i,R,B,D;w.visible&&(T=T.getContext("2d"),Y=w[_]||Z,D=w[N]!=Fi?w[N]:$,O=w[v]||W,Q=w[H]||b,A=w.size!=Fi?w.size:E,F=w[K]||I,P=w[X]||Ti,k=w[y]||wi,u=w[q]!=Fi?w[q]:ni,x=w[g]!=Fi?w[g]:ji,U=w[h]!=Fi?w[h]:fi,p=w[z]!=Fi?w[z]:Li,d=w[m]!=Fi?w[m]:Yi,i=w[t]!=Fi?w[t]:Oi,R=w[c]||Qi,B=w[S]||Ai,D&&(Y=s[L]=s.$8k(s[L]||Y,w[a]||M,w[r]||o,j?l:C,P)),n.call(s,T,G,V,e,J,A,j?l:C,Y,O,Q,f,F,k),D=s.$16k,(u||x)&&D&&(j?s.$9k(T,D.x,A,R,B,u,x,U,p,d,i):s.$10k(T,D.y,A,R,B,u,x,U,p,d,i,f)))}s._view&&A&&(P(T,f,s.$11k,!0,!1,"_currentTopMajorTickSpacing"),P(w,L,s.$12k,!1,!0,"_currentRightMajorTickSpacing"),P(n,Y,s.$11k,!0,!0,"_currentBottomMajorTickSpacing"),P(j,O,s.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(T,w,n,j,f){return T*j<n?T=e(w/j/f)*f:w<T*j&&(T=Y(n/j/f)*f),T},getHTipText:function(T){var w=this._component,n=0,j=this._view.getBoundingClientRect();return w.lp?n=J(w.lp({x:T.x+j.left,y:T.y}).x):n-=J(this.getComponentView(w).style.left)||0,n},$9k:function(T,w,n,j,f,L,Y,O,Q,A,F){var P=this._component,P=(T.save(),G.translateAndScale(T,0,0,1),w-(J(this.getComponentView(P).style.left)||0));w=this.getHTipText(this.$16k),L&&(T.beginPath(),T.fillStyle=j,T.rect(P,0,f,n),T.fill()),Y&&(T.beginPath(),T.textAlign="center",T.textBaseline="middle",T.font=A,L=T.measureText(w).width+6,T.fillStyle=F,T.rect(P-L/2,0,L,n),T.fill(),T.strokeStyle=O,T.stroke(),T.beginPath(),T.fillStyle=Q,T.fillText(w,P,0+n/2)),T.restore()},getVTipText:function(T){var w=this._component,n=0,j=this._view.getBoundingClientRect();return w.lp?n=J(w.lp({x:T.x,y:T.y+j.top}).y):n-=J(this.getComponentView(w).style.top)||0,n},formatScaleText:function(T){return Math.round(T)},$10k:function(T,w,n,j,f,L,Y,O,Q,A,F,P){var k=this._component,u=(T.save(),G.translateAndScale(T,0,0,1),n/2),k=w-(J(this.getComponentView(k).style.top)||0);w=this.getVTipText(this.$16k),L&&(T.beginPath(),T.fillStyle=j,T.rect(u-n/2,k,n,f),T.fill()),Y&&(T.translate(u,k),T.rotate((P?90:-90)*V/180),T.translate(-u,-k),T.beginPath(),T.textAlign="center",T.textBaseline="middle",T.font=A,L=T.measureText(w).width+6,T.fillStyle=F,T.rect(u-L/2,k-n/2,L,n),T.fill(),T.strokeStyle=O,T.stroke(),T.fillStyle=Q,T.fillText(w,u,k)),T.restore()},$11k:function(T,w,n,j,f,L,Y,O,Q,A,F,P,k){T.save();for(var u=w,x=(u+j)/2,U=(j=j-u,G.translateAndScale(T,w=0,0,1),0),p=0,d=J(L/2),i=L-d,R=F?0:d,B=O*Y,D=B/10,d=(T.clearRect(w-=B,0,(j+=B)-w,L),T.beginPath(),T.fillStyle=k,e(x/D)*D-u),U=d;U<j;U+=D)T.rect(U,0+R,1,i);for(U=d;w<U;U-=D)T.rect(U,0+R,1,i);for(T.fill(),R=F?0:1,T.beginPath(),T.fillStyle=P,U=d=e(x/B)*B-u;U<j;U+=B)T.rect(U,0+R,1,L-1);for(U=d;w<U;U-=B)T.rect(U,0+R,1,L-1);T.fill();k=(J(/\d+px/.exec(Q)[0])||10)/2,T.textBaseline="middle",R=F?L-k-2:2+k,T.beginPath(),T.fillStyle=A,T.font=Q,P=e(x/B)*B/Y;for(U=d,p=P;U<j;U+=B,p+=O){var s=this.getHScaleText?this.getHScaleText(U):p;T.fillText(this.formatScaleText(s),U+2,0+R)}for(U=d,p=P;w<U;U-=B,p-=O){s=this.getHScaleText?this.getHScaleText(U):p;T.fillText(this.formatScaleText(s),U+2,0+R)}T.restore()},$12k:function(Y,T,w,n,j,f,L,O,Q,A,F,P,k){Y.save();for(var u=w,x=(u+j)/2,U=(j=j-u,G.translateAndScale(Y,w=0,0,1),0),p=this,d=0,i=J(f/2),R=f-i,B=F?0:i,D=O*L,s=D/10,i=(Y.clearRect(0,0,f,(j+=D)-(w-=D)),Y.beginPath(),Y.fillStyle=k,e(x/s)*s-u),U=i;U<j;U+=s)Y.rect(0+B,U,R,1);for(U=i;w<U;U-=s)Y.rect(0+B,U,R,1);for(Y.fill(),B=F?0:1,Y.beginPath(),Y.fillStyle=P,U=i=e(x/D)*D-u;U<j;U+=D)Y.rect(0+B,U,f-1,1);for(U=i;w<U;U-=D)Y.rect(0+B,U,f-1,1);Y.fill();var k=(J(/\d+px/.exec(Q)[0])||10)/2,l=90*V/180;function C(T,w,n,j,f,L){f=p.getVScaleText?p.getVScaleText(n):f,f=p.formatScaleText(f),Y.translate(T+w,n),Y.rotate(-j),Y.translate(-T-w,-n),Y.fillText(f,T+w+(L?2:1),n),Y.translate(T+w,n),Y.rotate(j),Y.translate(-T-w,-n)}Y.textBaseline="middle",B=F?f-k:2+k,l=F?-l:l,Y.beginPath(),Y.fillStyle=A,Y.font=Q;P=e(x/D)*D/L;for(U=i,d=P;U<j;U+=D,d+=O)C(0,B,U,l,d,F);for(U=i,d=P;w<U;U-=D,d-=O)C(0,B,U,l,d,F);Y.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var T=this,w=T._component,n=T._view;w&&T.removeComponentPropertyChangeListener(w,T.$14k),n&&(u(n,"mousemove",T.$15k),L(n.parentNode,n),T._view=null)}},f.def(ht.widget[T],w,j)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);